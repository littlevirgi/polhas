(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{"29d2":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{},[s("q-header",{staticClass:"text-primary bg-white",attrs:{reveal:"","reveal-offset":10}},[s("q-toolbar",[s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"arrow_back"},on:{click:t.handleBackButton}}),s("q-toolbar-title",{staticClass:"text-weight-bold brand"},[t._v("Checkout")])],1)],1),t.carts&&t.carts.length?s("div",{ref:"top",staticClass:"q-pb-xl",attrs:{id:"checkout"}},[s("shipping-address",{attrs:{isModalAddress:t.isAvailableOldAddress},on:{place:t.placeOrder,closeModal:function(e){t.isAvailableOldAddress=!1}}})],1):t._e(),s("q-inner-loading",{attrs:{showing:t.loading}},[s("q-spinner-facebook",{attrs:{size:"50px",color:"primary"}})],1),s("q-footer",{staticClass:"bg-white q-pa-md"},[s("q-btn",{staticClass:"full-width",attrs:{disabled:!t.isOk,"no-caps":"",unelevated:"",label:"Proses Pesanan",color:"primary"},on:{click:t.directChekout}})],1)],1)},n=[],r=(s("159b"),s("99af"),s("b0c0"),s("ac1f"),s("5319"),s("2ca0"),s("13d5"),s("1276"),s("a15b"),s("54df")),o={components:{ShippingAddress:r["a"]},name:"DirectWithShipping",data:function(){return{isAvailableOldAddress:!1,isOk:!1,formLoading:!1,form:{reference:"",customer_name:"",customer_email:"",customer_whatsapp:"",address:"",items:[],subtotal:0,total:0,quantity:0,weight:0,shipping_courier_name:"COD",shipping_cost:"",shipping_courier_service:""}}},computed:{carts:function(){return this.$store.state.cart.carts},shop:function(){return this.$store.state.shop},config:function(){return this.$store.state.config},loading:function(){return this.$store.state.loading},session_id:function(){return this.$store.state.session_id}},mounted:function(){this.carts.length||this.$router.back(),this.checkDataUser()},methods:{placeOrder:function(t){this.form=t,this.checkStepOk()},checkDataUser:function(){localStorage.getItem("user_data")&&(this.isAvailableOldAddress=!0)},handleBackButton:function(){this.$router.push({name:"Cart"})},toTop:function(){var t=this;setTimeout((function(){var e=t.$refs.top;e.scrollIntoView({behavior:"smooth"})}),500)},checkStepOk:function(){this.form.customer_name&&this.form.customer_whatsapp&&this.form.shipping_courier_name&&this.form.address?this.isOk=!0:this.isOk=!1},directChekout:function(){var t=this;if(this.checkStepOk(),this.isOk){var e="https://api.whatsapp.com",s=this.formatPhoneNumber(this.shop.phone),a="Halo kak, saya mau order:\n\n",n=this.carts,r=1;n.forEach((function(e){a+="*".concat(r,". ").concat(e.name,"*\nJumlah: ").concat(e.quantity,"\nHarga (@): ").concat(t.moneyIDR(e.price),"\nHarga Total: ").concat(t.moneyIDR(e.quantity*e.price),"\n\n"),r++})),a+="Subtotal: *".concat(this.moneyIDR(this.subtotal()),"*\nOngkir: *").concat(this.moneyIDR(this.form.shipping_cost),"*\nTotal: *").concat(this.moneyIDR(this.total()),"*\n-----------------------------------\n\n*Nama:*\n ").concat(this.form.customer_name," (").concat(this.form.customer_whatsapp,")\n\n*Alamat:*\n").concat(this.formatAddressCod(this.form.address),"\n\nKurir: ").concat(this.form.shipping_courier_name,"\nServis: ").concat(this.form.shipping_courier_service,"\n");var o=e+"/send?phone="+s+"&text="+encodeURI(a);setTimeout((function(){t.$router.push({name:"Cart"})}),1e3),setTimeout((function(){t.$store.dispatch("cart/clearCart",t.session_id)}),5e3),window.open(o,"_blank")}},formatPhoneNumber:function(t){var e=t.replace(/\D/g,"");return e.startsWith("0")&&(e="62"+e.substr(1)),e},subtotal:function(){if(this.carts.length>1){var t=[];return this.carts.forEach((function(e){t.push(e.quantity*e.price)})),t.reduce((function(t,e){return t+e}))}return this.carts[0].quantity*this.carts[0].price},total:function(){return this.subtotal()+this.form.shipping_cost},money:function(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t)},formatAddressCod:function(t){var e=t.split("<br>");return e.join("\n")}}},i=o,c=s("2877"),h=s("9989"),u=s("e359"),l=s("65c6"),d=s("9c40"),p=s("6ac5"),f=s("74f7"),m=s("e669"),b=s("7ff0"),g=s("eebe"),k=s.n(g),_=Object(c["a"])(i,a,n,!1,null,null,null);e["default"]=_.exports;k()(_,"components",{QPage:h["a"],QHeader:u["a"],QToolbar:l["a"],QBtn:d["a"],QToolbarTitle:p["a"],QInnerLoading:f["a"],QSpinnerFacebook:m["a"],QFooter:b["a"]})}}]);